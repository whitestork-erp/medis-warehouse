[
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": ".table-1{\r\n    margin-top:0.07cm;\r\n}\r\n\r\n.table-2{\r\n    margin-top:1.5cm;\r\n}\r\n\r\n.hdr-box{\r\n    width:14.5cm;\r\n    position: relative;\r\n    bottom:0.2cm;\r\n}\r\n\r\n\r\n/* Logo */\r\n.hdr-left {\r\n  padding-top: 35px;\r\n  display: flex;\r\n  justify-content: center;    \r\n  align-items: center;        \r\n  font-size: 9px;\r\n  white-space: nowrap;\r\n}\r\n\r\n/* OR using position */\r\n.hdr-left {\r\n  position: relative;\r\n  top: 30px;\r\n  left:10px;\r\n  \r\n}\r\n\r\n\r\n/* Middle details */\r\n/* Middle details wrapper */\r\n.hdr-center {\r\n  width: 11cm;\r\n  border-collapse: collapse; \r\n  margin: 0;\r\n  padding: 0;\r\n  overflow: hidden;\r\n}\r\n\r\n/* Inner table full width */\r\n.hdr-inner {\r\n  width: 14.1cm;          /* extend full width */\r\n  border-collapse: collapse;\r\n  table-layout: fixed;  /* makes width distribution consistent */\r\n}\r\n\r\n\r\n.hdr-center td,\r\n.hdr-center th {\r\n  padding: 2px 4px;      /* small padding for readability */\r\n  margin: 0;\r\n  vertical-align: top;  \r\n  line-height: 1.2;\r\n}\r\n\r\n/* Left column */\r\n.hdr-col-left {\r\n  border: 1px solid black;\r\n  border-right: none;\r\n  font-size: 10px;\r\n  line-height: 1.2;\r\n  width: 40%;   /* wider */\r\n  \r\n}\r\n\r\n/* Right column */\r\n.hdr-col-right {\r\n  border: 1px solid black;\r\n  border-left: none;\r\n \r\n  font-size: 10px;\r\n  line-height: 1.2;\r\n   width: 60%; \r\n  position: relative;\r\n}\r\n\r\n\r\n.barcode {\r\n  position: absolute;\r\n  top: 0.3cm;  /* adjust spacing from bottom */\r\n  right: 0.5cm;   /* adjust spacing from right */\r\n  width: 3.5cm;\r\n  height: 0.8cm;\r\n  overflow: visible; /* allow it to overflow if needed */\r\n}\r\n.barcode img {\r\n  width: 100%;\r\n  height: auto;\r\n}\r\n\r\n\r\n\r\n\r\n/* Key-value layout */\r\n.kv {\r\n  display: flex;\r\n  justify-content: flex-start;\r\n  align-items: baseline;\r\n  margin: 2px 0;\r\n  padding: 0;\r\n}\r\n\r\n.k {\r\n  margin-right: 4px;\r\n  min-width: 70px;\r\n}\r\n\r\n.sep {\r\n  margin: 0 2px;\r\n}\r\n\r\n.v {\r\n  flex: 0 0 auto;      /* prevent shrinking */\r\n  white-space: nowrap; /* keep text on one line */\r\n  overflow: visible;   /* allow it to exceed parent */\r\n  text-overflow: clip; /* don't add ellipsis */\r\n}\r\n.kv, .k, .sep, .v, .inline-right {\r\n  margin: 0;\r\n  padding: 0;\r\n  line-height: 1.2;  \r\n}\r\n\r\n.inline-right {\r\n  \r\n  margin-left: 8px;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n.rect2{\r\n   height:7cm;\r\n  width:18cm;\r\n  border: 1px solid #333;\r\n  \r\n}\r\n\r\n\r\n.item-table { \r\n    position:relative;\r\n    right:0.3cm;\r\n    bottom:0.2cm;\r\n  height:7cm;\r\n  width:18.8cm;\r\n  border-collapse: collapse;\r\n  font-size: 11px;             \r\n  font-family: Arial, sans-serif;\r\n  border: 1px solid #333; \r\n  text-align: center;\r\n  table-layout: fixed;\r\n  border-spacing: 0 0.2cm;\r\n}\r\n\r\n.item-table th {\r\n  line-height: 0;         \r\n  font-size: 11px;            \r\n  text-align: center;\r\n  border-left: 1px solid #333;\r\n  border-right: 1px solid #333;\r\n  border-bottom: 1px solid #333;\r\n  color:black;\r\n  padding-bottom:0.2cm;\r\n          \r\n}\r\n\r\n.item-table td {\r\n  line-height: .8;          \r\n  font-size: 11px; \r\n  border-left: 1px solid black;\r\n  border-right: 1px solid black;\r\n  border-bottom:none;\r\n  padding:0 !important;\r\n}\r\n.item-table tr:nth-child(1){\r\n     line-height: 1.5;\r\n}\r\n\r\n\r\n\r\n/* Optional: subtle styling for span inside description */\r\n.item-table td span {\r\n  line-height:0.8;\r\n  font-size:10px;\r\n}\r\n.item-tabe td .test{\r\n    font-size:10px;\r\n}\r\n\r\n\r\n\r\n/* Column widths based on your priority layout */\r\n.item-table th:nth-child(1),\r\n.item-table td:nth-child(1) {\r\n  width: 1.5cm;/* Code */\r\n}\r\n\r\n.item-table th:nth-child(2),\r\n.item-table td:nth-child(2) {\r\n  width: 1cm; /* VAT */\r\n}\r\n\r\n.item-table th:nth-child(3),\r\n.item-table td:nth-child(3) {\r\n  width: 5.5cm; /* Description */\r\n  padding-left:5px !important ;\r\n}\r\n\r\n.item-table td:nth-child(3) div {\r\n  line-height:0.8;\r\n  height:0.5cm;\r\n}\r\n.item-table td:nth-child(3){\r\n    text-align:left;\r\n    \r\n}\r\n\r\n.item-table th:nth-child(4),\r\n.item-table td:nth-child(4) {\r\n  width: 1.2cm; /* Qty */\r\n  \r\n}\r\n\r\n.item-table th:nth-child(5),\r\n.item-table td:nth-child(5) {\r\n  width: 2.3cm; /* Unit Price */\r\n  \r\n}\r\n\r\n.item-table th:nth-child(6),\r\n.item-table td:nth-child(6) {\r\n  width: 1.4cm; /* DISC % */\r\n  \r\n}\r\n\r\n.item-table th:nth-child(7),\r\n.item-table td:nth-child(7) {\r\n  width: 2.5cm; /* Net Price */\r\n  \r\n}\r\n\r\n\r\n\r\n\r\n.footer {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content:center;\r\n  margin: 0.2cm 0;\r\n  width: 100%;\r\n}\r\n.final_table td{\r\n    padding:0 !important;\r\n}\r\n.arabic {\r\n    display:flex;\r\n    flex-direction:column;\r\n    justify-content:center;\r\n    list-style-position: inside; /* optional: keeps bullets inside */\r\n  padding: 0;\r\n  padding-right:0.2cm;/* remove default padding */\r\n  margin: 0;\r\n}\r\n\r\n\r\n\r\n\r\n.arabic li{\r\n    direction:rtl;\r\n    font-size: 9px;        \r\n    line-height: 1.2;\r\n    text-align:right;\r\n    \r\n    \r\n    }\r\n.financial-summary {\r\n  position:relative;\r\n  left:0.65cm;\r\n  \r\n  width:12.35cm;\r\n  height:1.5cm;\r\n  align-items:flex-start;\r\n  font-family: Arial, sans-serif;\r\n  font-size: 10px;\r\n  \r\n  \r\n}\r\n\r\n.financial-summary table {\r\n  border-collapse: collapse;\r\n  table-layout: fixed;\r\n  width: 100%;\r\n}\r\n\r\n.financial-summary th,\r\n.financial-summary td {\r\n  padding:5px !important;\r\n  border: 1px solid #000;\r\n  text-align: center;\r\n  white-space: nowrap;\r\n  font-size: 10px;\r\n  width:2cm;\r\n  color:black;\r\n}\r\n\r\n.financial-summary th:nth-child(1),\r\n.financial-summary td:nth-child(1) {\r\n  width: 1.4cm;\r\n}\r\n.financial-summary th:nth-child(3),\r\n.financial-summary td:nth-child(3) {\r\n  width: 1.8cm;\r\n}\r\n\r\n.financial-summary th:nth-child(6),\r\n.financial-summary td:nth-child(6) {\r\n  width: 0.8cm;\r\n}\r\n.financial-summary th:nth-child(4),\r\n.financial-summary td:nth-child(4) {\r\n  width: 2.6cm;\r\n}\r\n.financial-summary th:nth-child(5),\r\n.financial-summary td:nth-child(5) {\r\n  width: 2.6cm;\r\n}\r\n.rect3{\r\n    width:12.5cm;\r\n    height:1.5cm;\r\n    border:1px solid black;\r\n    text-align:center;\r\n    \r\n}\r\n\r\n\r\n.words{\r\n    position:relative;\r\n    right:0.35cm;\r\n    \r\n    text-align:center;\r\n    width:18.9cm;\r\n    font-size:10px;\r\n    height:0.9cm;\r\n    border:1px solid black;\r\n    margin-top:8px;\r\n}",
  "custom_format": 1,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Sales Invoice",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": null,
  "html": "{% set address  = frappe.get_doc(\"Address\", doc.customer_address) if doc.customer_address else None %}\r\n{% set tax = frappe.get_doc(\"Item Tax Template Detail\", doc.tax_type) if doc.tax_type else None %}\r\n{% set taxRate = frappe.get_doc(\"Item Tax Template Detail\", doc.tax_rate) if doc.tax_type else None %}\r\n{% set barcode_img = frappe.call('medis.utils.barcode_utils.generate_barcode', docname=doc.name) %}\r\n{% set mof  = frappe.get_doc(\"Customer\", doc.customer)%}\r\n{% set items = doc.items %}\r\n{% set chunk_size = 9 %}\r\n\r\n{% macro header_render() %}\r\n<header>\r\n  <table class=\"hdr-box\">\r\n    <tr>\r\n      <!-- LEFT: Logo -->\r\n      <td class=\"hdr-left\">\r\n        <p>  Medispharm Drugstore S.A.R.L</p>\r\n        <p style=\"text-align:right\">Reg#123456789</p>\r\n      </td>\r\n\r\n      <!-- CENTER: Invoice details -->\r\n   <td class=\"hdr-center\">\r\n  <table class=\"hdr-inner\">\r\n    <tr>\r\n      <!-- LEFT column of details -->\r\n      <td class=\"hdr-col-left\">\r\n        <div class=\"kv\"><span class=\"k\">Inv. No</span><span class=\"sep\">:</span><span class=\"v\">{{ doc.name }}</span></div>\r\n        <div class=\"kv\"><span class=\"k\">Date / Time</span><span class=\"sep\">:</span>\r\n          <span class=\"v\">{{ frappe.utils.format_date(doc.posting_date,\"dd-MM-YYYY\") }} {{ frappe.utils.format_time(doc.posting_time,\"HH:mm\") }}</span>\r\n        </div>\r\n        <div class=\"kv\"><span class=\"k\">Salesman</span><span class=\"sep\">:</span>\r\n          <span class=\"v\">{{ doc.sales_team[0].sales_person if doc.sales_team else \"\" }}</span>\r\n        </div>\r\n<div class=\"kv\">\r\n  <span class=\"k\">Operator</span><span class=\"sep\">:</span>\r\n  <span class=\"v\">{{ doc.owner[:16] }}</span>\r\n</div>\r\n<div class=\"kv\">\r\n  \r\n  <span class=\"v\">{{ doc.custom_notes[:35] }}</span>\r\n</div>\r\n\r\n      </td>\r\n\r\n      <!-- RIGHT column of details -->\r\n<td class=\"hdr-col-right\">\r\n        <div class=\"kv\"><span class=\"k\">Cust. Code</span><span class=\"sep\">:</span>\r\n          <span class=\"v\"> {{mof.custom_old_id}}<span class=\"inline-right\">MOF :{{mof.custom_mof_number}}</span></span>\r\n        </div>\r\n        <div class=\"kv\"><span class=\"k\">Phone No.</span><span class=\"sep\">:</span>\r\n          <span class=\"v\">{{mof.custom_phone_1}}</span>\r\n          </div>\r\n        <div class=\"kv\"><span class=\"k\">Beneficiary</span><span class=\"sep\">:</span>\r\n          <span class=\"v\">{{doc.custom_beneficiary}}</span>\r\n        </div>\r\n        </div>\r\n        <div class=\"kv\"><span class=\"k\">Cust. Name</span><span class=\"sep\">:</span>\r\n          <span class=\"v\">{{ doc.customer }}</span>\r\n        </div>\r\n               <div class=\"kv\"><span class=\"k\">Address</span><span class=\"sep\">:</span>\r\n          <span class=\"v\">{{mof.custom_address_1 }}</span>\r\n        </div>\r\n \r\n        \r\n             <div class=\"barcode\">\r\n  <img src=\"{{ barcode_img }}\" />\r\n</div>\r\n      </td>\r\n\r\n \r\n    </tr>\r\n  </table>\r\n</td>\r\n\r\n    </tr>\r\n  </table>\r\n</header>\r\n\r\n{% endmacro %}\r\n\r\n{# ------------------ TABLE MACRO ------------------ #}\r\n{% macro table_render(chunk) %}\r\n<table class=\"item-table\">\r\n  <thead>\r\n    <tr>\r\n      <th>Code</th>\r\n      <th>VAT</th>\r\n      <th>Description</th>\r\n      <th>Qty</th>\r\n      <th>Unit Price</th>\r\n      <th>DISC %</th>\r\n      <th>Net Price</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    {% for item in chunk %}\r\n      <tr>\r\n        <td><p>{{ item.item_code }}</p></td>\r\n        <td>{% if item.item_tax_template %}\r\n            {% set tax = frappe.get_doc(\"Item Tax Template\", item.item_tax_template) %}\r\n            <p>*</p>\r\n          {% endif %}</td>\r\n        <td>\r\n          <p>{{ item.item_name }}</p>\r\n          {% if item.batch_no %}\r\n            {% set batch = frappe.get_doc(\"Batch\", item.batch_no) %}\r\n            {% if batch.expiry_date %}<span>E:{{ batch.expiry_date }}</span>{% endif %}\r\n            <span>B:{{ item.batch_no }}</span>\r\n          {% endif %}\r\n        </td>\r\n        <td><p>{{ item.qty| int }}</p></td>\r\n        <td><p>{{ \"{:,.2f}\".format(item.price_list_rate) }}</p></td>\r\n        <td><p>{{ \"{:.2f}\".format(item.discount_percentage) }}</p></td>\r\n        <td><p>{{ \"{:,.2f}\".format(item.amount) }}</p></td>\r\n      </tr>\r\n    {% endfor %}\r\n\r\n    {# Pad empty rows to always make 9 rows #}\r\n    {% for i in range(chunk_size - chunk|length) %}\r\n      <tr>\r\n        <td>&nbsp;</td><td></td><td></td><td></td><td></td><td></td><td></td>\r\n      </tr>\r\n    {% endfor %}\r\n  </tbody>\r\n</table>\r\n{% endmacro %}\r\n\r\n\r\n\r\n{# ------------------ FOOTER MACRO ------------------ #}\r\n{% macro footer_render() %}\r\n\r\n<footer class=\"footer\" style=\"width:22cm\">\r\n  <table class=\"final_table\">\r\n    <tr>\r\n      <td style=\"width:25%\">\r\n        <div class=\"arabic\">\r\n          <li>لا تعتبر الفاتورة مسددة الا بموجب ايصال رسمي</li>\r\n          <li>لا يسمح حسم اي مرتجع الا بموجب اشعار حسم صادر عن الشركة</li>\r\n          <li>نأسف لعدم قبول اي مرتجع غير مباع من مستودعنا</li>\r\n          <li>لسنا مسؤولين عن انتهاء فعالية الدواء</li>\r\n        </div>\r\n      </td>\r\n      <td style=\"width:75%\">\r\n        <div class=\"financial-summary\">\r\n          <table>\r\n            <thead>\r\n              <tr>\r\n                <th>Total QTY</th>\r\n                <th>Total Tax Amt.</th>\r\n                <th>VAT (11.00%)</th>\r\n                <th>Net Without VAT</th>\r\n                <th>Total Due</th>\r\n                <th>Cur</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr>\r\n                <td>{{ doc.total_qty | int }} PCS</td>\r\n                <td>{{ \"{:,.2f}\".format(doc.total_taxes_and_charges / 0.11) }}</td>\r\n                <td>{{ \"{:,.2f}\".format(doc.total_taxes_and_charges) }}</td>\r\n                <td>{{ \"{:,.2f}\".format(doc.base_total) }}</td>\r\n                <td>{{ \"{:,.2f}\".format(doc.base_grand_total) }}</td>\r\n                <td>{{doc.currency}}</td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </td>\r\n    </tr>\r\n  </table>\r\n</footer>\r\n\r\n\r\n\r\n<div class=\"words\"><p>Only: **{{doc.in_words}}</p></div>\r\n{% endmacro %}\r\n\r\n\r\n\r\n{# ------------------ MAIN LOOP ------------------ #}\r\n<style>\r\n    body > div:first-child {\r\n    display: none !important; \r\n}\r\n        .print-format {\r\n            margin-left: 6.1mm;\r\n            margin-right: 8mm;\r\n            margin-top: 9mm;\r\n            margin-bottom: 2mm;\r\n      }\r\n  \r\n      </style>\r\n      \r\n{% for i in range(0, items|length, chunk_size) %}\r\n<br>\r\n  {% set chunk = items[i:i+chunk_size] %}\r\n  {% set page_no = loop.index %}\r\n  {% set total_pages = (items|length // chunk_size) + (1 if items|length % chunk_size > 0 else 0)%}\r\n  <div  {% if not loop.last %} style=\"page-break-after: always;\"{% endif %} >\r\n    \r\n    <!-- First Copy -->\r\n    <div class=\"table-1\">\r\n      {{ header_render() }}\r\n      \r\n      {{ table_render(chunk) }}\r\n     \r\n      {{footer_render()}}\r\n      <div style=\"text-align:center; font-size:8px;\">\r\n        Page {{ page_no }} of {{ total_pages }}\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Second Copy -->\r\n    <div class=\"table-2\">\r\n      {{ header_render() }}\r\n      \r\n      {{ table_render(chunk) }}\r\n      {{footer_render()}}\r\n      <div style=\"text-align:center; font-size:8px;\">\r\n        Page {{ page_no }} of {{ total_pages }}\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n{%endfor%}",
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2025-09-26 09:33:48.495418",
  "module": "Accounts",
  "name": "Medis Split Invoice",
  "page_number": "Hide",
  "pdf_generator": "wkhtmltopdf",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 }
]